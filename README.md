# gs2000

Программа выполняет расчет режимов работы генератора-разбавителя ГС-2000 производства [АО "Оптэк"](https://optec.ru).
Программа предназначена для расчета режимов работы генератора ГС-2000 зав. № 58-2-21 (каждый генератор ГС-2000
имеет индивидуальные коэффициенты разбавления, значения которых указаны в паспорте).

## Запуск программы

Запустить программу можно по ссылке [gs2000](https://ave6990.github.io/gs2000/gs2000.html).

## Использование программы

Для выполнения расчета необходимо:
* выбрать целевой компонент (при необходимости пересчета целевой концентрации в единицах мг/м^3);
* выбрать единицу измерения концентрации целевого компонента в исходной газовой смеси (ГС);
* выбрать газ-разбавитель;
* ввести значение концетрации целевого компонента в исходной ГС;
* выбрать единицу измерения концентрации целевого компонента в ГС на выходе генератора;
* ввести требуемое значение концетрации целевого компонента в ГС на выходе генератора;
* нажать кнопку "Расчитать".

Кроме того возможно решение обратной задачи: по заданному положению переключателей клапанов расчитать
концентрацию целевого компонента в ГС на выходе генератора. Для этого нужно выполнить первые 5 пунктов
описанных выше. Затем выставить флажки положения переключателей клапанов в заданное положение. 
При переключении каждого флажка будет производиться пересчет концентрации на выходе генератора в выбранных единицах.

## Версии

### v2.5.1

* Исправлен вывод результатов вычислений, при возникновении ошибки исходных
данных (минимально и максимально возможные концентрации).

### v2.5.0

* Упрощен алгоритм вычисления суммы подмноежств. Вместо выполнения сортировок
или фильтраций на каждой итерации, проходим по всем элементам отсортированного
списка значений и проверяем их на соответствие критериям оптимальности. В сущности
малое количество итераций явного цикла, в предыдущих реализациях алгоритма,
сводилось на нет использованием функций фильтрации или сортировки, которые
добавляли неявный вложенный цикл по элементам списка.
* Изменена функция логирования. Использован компактный формат записи результатов
вычислений, который умещается на одной строке.

### v2.4.0

* Удалена функция `spliceList` (библиотека `gs2000.lib.js`). Отсечение значений 
массива больших ближайшего к заданному значению переписана с использованием
встроенной функции `filter()`.
* В случае ошибки в исходных данных, результат вычислений выводится вместе с
сообщением об ошибке.

### v2.3.0

* Добавлен вывод сообщений об ошибках в поле вывода результатов измерений.
* Расширен лог вычислений (сообщения об ошибках и коррекция по H2S).
* Исправлено вычисление коррекции по H2S.

### v2.2.3

* При переключении флажков, меняется значение целевой концентрации.
* Изменена таблица стилей. Добавлен блок переменных. Более контрастные цвета.

### v2.2.2

* Добавлен пересчет целевой концентрации, при изменении состояния флажков
* `lib/converter.js`добавлен учет условий микроклимата, при переводе в массовую
концентрацию.

### v2.2.1

* Исправлена ошибка вывода результатирующей концентрации при переключении
клапанов вручную.

### v2.2.0

* Незначительно переработан дизайн приложения.
* Исправлена функция логирования.
* Исправлена функция проверки исходных данных. Исходные данные проверяются в 
библиотеке `gs2000.lib.js`.
* Переписана функция конвертации единиц измерения.

### v2.1.2

Переработана библиотека `converter.js`. Добавлена функция конвертации из одной
единицы измерения в другую.

### v2.1.1

Найдены ошибки разделения логики между модулями. (устраняются)

### v2.1.0

Используется новая версия библиотеки `gs2000.lib.js`.

Исходное множество значений коэффициентов разбавления `K` отображено в
новое множество вида `L = { 1 / (k1 - 1) , 1 / (k2 - 1), ..., 1 / (k10 - 1) }`.
За счет чего вычисление коэффициента разбавления для нескольких клапанов
вычисляется как сумма 
`l = a1 * l1 + a2 * l2 + ... + a10 * l10`
вместо 
`k = 1 / (1 / (a1 * k1 - 1) + 1 / (a2 * k2 - 1) + ... + 1 / (a10 * k10 - 1)) + 1`,
где `ai` принадлежит множеству `{ 0, 1 }`.

### v2.0.3

Отключено ограничение исходной концентрации (только сообщения).

### v2.0.2

Исправлена таблица стилей.

### v2.0.1

Исправлен баг с расчетом максимальной и минимальной концентрации на выходе генератора.
Добавлено текстовое поле для логирования расчетов и вывода сообщений об ошибках.

### v2.0.0 

Используется новый алгоритм расчета оптимального режима работы генератора.
